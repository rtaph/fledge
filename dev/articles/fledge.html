<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Get started with fledge • fledge</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Get started with fledge">
<meta property="og:description" content="fledge">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">fledge</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.1.0.9002</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/fledge.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/cran-automation.html">Automate CRAN releases</a>
    </li>
    <li>
      <a href="../articles/demo.html">Using fledge</a>
    </li>
    <li>
      <a href="../articles/internals.html">Fledge internals</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/cynkra/fledge/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Get started with fledge</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/cynkra/fledge/blob/HEAD/vignettes/fledge.Rmd" class="external-link"><code>vignettes/fledge.Rmd</code></a></small>
      <div class="hidden name"><code>fledge.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://cynkra.github.io/fledge/">fledge</a></span><span class="op">)</span></code></pre></div>
<p>Do you want to provide a changelog (<a href="https://blog.r-hub.io/2020/05/08/pkg-news/#why-write-the-changelog-as-newsmd" class="external-link">NEWS.md</a>) more informative than <a href="https://twitter.com/EmilyKager/status/1413628436984188933" class="external-link">“bug fixes and performance improvements”</a> to the users of your package?</p>
<p>Ways to achieve that are:</p>
<ul>
<li><p>Update NEWS.md right before release by reading through commit messages. Not necessarily fun!</p></li>
<li><p>Update the changelog in every commit e.g. in every PR. Now, if there are several feature PRs around that update the changelog, you’ll have a few clicks to make to tackle conflicts. Easy enough, but potentially annoying.</p></li>
<li>
<p>Use fledge to</p>
<ul>
<li>fill the <code>NEWS.md</code> for you based on informative commit messages,</li>
<li>increase the version number in <code>DESCRIPTION</code> (e.g. useful in bug reports with session information!),</li>
<li>create git tags (more coarse-grained history compared to top-level merges see <a href="https://github.com/cynkra/fledge/tags" class="external-link">fledge tag list on GitHub</a>).</li>
</ul>
</li>
</ul>
<p>Using fledge is a discipline / a few habits that is worth learning!</p>
<p>What you need to do in practice is:</p>
<ul>
<li>Add a hyphen <code>-</code> or <code>*</code> at the beginning of important commit messages e.g. the merge or squash commits that merge a Pull Request. These are the commit messages that’ll be recorded in the changelog eventually! Exclude housekeeping parts of the message by typing them after a line <code>---</code>.</li>
</ul>
<pre class="text"><code>
- Add support for bla databases.
</code></pre>
<p>or</p>
<pre class="text"><code>
- Add support for bla databases.

---

Also tweak the CI workflow accordingly. :sweat_smile:
</code></pre>
<p>For informative commit messages refer to the <a href="https://style.tidyverse.org/news.html" class="external-link">Tidyverse style guide</a>.</p>
<ul>
<li><p>Run <code><a href="../reference/bump_version.html">fledge::bump_version()</a></code> regularly e.g. before every coffee break or at the end of the day or of the week. If you forgot to merge one PR run <code><a href="../reference/unbump_version.html">fledge::unbump_version()</a></code>, merge the PR with an informative squash commit message, then run <code><a href="../reference/bump_version.html">fledge::bump_version()</a></code> and go drink that coffee!</p></li>
<li><p>Run <code><a href="../reference/finalize_version.html">fledge::finalize_version()</a></code> if you add to edit <code>NEWS.md</code> manually e.g. if you made a typo or are not happy with a phrasing after thinking about it. Even if you edit a lot, what’s been written in by fledge is still a good place-holder.</p></li>
<li><p>Follow the recommended steps at release (see <code><a href="../articles/fledge.html">vignette("fledge")</a></code> usage section).</p></li>
</ul>
<p>These habits are worth learning!</p>
<div class="section level2">
<h2 id="installation-setup">Installation &amp; setup<a class="anchor" aria-label="anchor" href="#installation-setup"></a>
</h2>
<div class="section level3">
<h3 id="once-per-machine">Once per machine<a class="anchor" aria-label="anchor" href="#once-per-machine"></a>
</h3>
<p>Install from CRAN using:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"fledge"</span><span class="op">)</span></code></pre></div>
<p>Install from cynkra’s R-universe (development version) using:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"fledge"</span>, repos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"https://cynkra.r-universe.dev"</span>, <span class="st">"https://cloud.r-project.org"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Or install from GitHub (development version as well) using:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"cynkra/fledge"</span><span class="op">)</span></code></pre></div>
<p>If you are used to making workflow packages (e.g. <a href="https://usethis.r-lib.org/articles/articles/usethis-setup.html#use-usethis-or-devtools-in-interactive-work" class="external-link">devtools</a>) available for all your interactive work, you might enjoy loading fledge in your <a href="https://rstats.wtf/r-startup.html#rprofile" class="external-link">.Rprofile</a>.</p>
</div>
<div class="section level3">
<h3 id="once-per-package">Once per package<a class="anchor" aria-label="anchor" href="#once-per-package"></a>
</h3>
<ul>
<li><p>Your package needs to have a remote that indicates the default branch (e.g. GitHub remote) <em>or</em> to be using the same default branch name as your global/project <code>init.defaultbranch</code>.</p></li>
<li>
<p>If your package…</p>
<ul>
<li>is brand-new, remember to run <code><a href="../reference/bump_version.html">fledge::bump_version()</a></code> regularly.</li>
<li>has already undergone some development, it is not too late to jump on the train! Run <code><a href="../reference/bump_version.html">fledge::bump_version()</a></code> and then <code><a href="../reference/finalize_version.html">fledge::finalize_version()</a></code>.</li>
</ul>
</li>
<li><p>Add a mention of fledge usage in your contributing guide, as contributors might not know about it. A comment is added to the top of <code>NEWS.md</code>, but it tends to be ignored occasionally.</p></li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a>
</h2>
<p>{fledge} consists of the following functions that enable versioning at different stages through the package development lifecycle.</p>
<table style="width:100%;" class="table">
<colgroup>
<col width="33%">
<col width="38%">
<col width="28%">
</colgroup>
<thead><tr class="header">
<th>Function Name</th>
<th>Description</th>
<th>Stage Applicable</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>bump_version(which)</code></td>
<td>Increments the package version based on argument. (Version format supported <em>major.minor.dev.patch</em>)</td>
<td>Configuration, Development, Release</td>
</tr>
<tr class="even">
<td><code><a href="../reference/finalize_version.html">finalize_version()</a></code></td>
<td>Finalize the package version</td>
<td>Configuration, Development</td>
</tr>
<tr class="odd">
<td><code><a href="../reference/commit_version.html">commit_version()</a></code></td>
<td>Commits <code>NEWS.md</code> and <code>DESCRIPTION</code> to Git.</td>
<td>Release</td>
</tr>
<tr class="even">
<td><code><a href="../reference/tag_version.html">tag_version()</a></code></td>
<td>Parses <code>NEWS.md</code> and creates/updates the tag for the most recent version.</td>
<td>Release</td>
</tr>
<tr class="odd">
<td><code><a href="../reference/update_news.html">update_news()</a></code></td>
<td>Update <code>NEWS.md</code> with messages from top level commits</td>
<td>Used by <code><a href="../reference/bump_version.html">bump_version()</a></code>
</td>
</tr>
<tr class="even">
<td><code><a href="../reference/update_version.html">update_version()</a></code></td>
<td>Update <code>NEWS.md</code> and <code>DESCRIPTION</code> with a new version</td>
<td>Used by <code><a href="../reference/bump_version.html">bump_version()</a></code>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>The following sections show how to combine these functions at different stages with any R package on GitHub. All {fledge} commands should be issued from the package directory of the target R package.</p>
<div class="section level3">
<h3 id="initial-configuration">Initial Configuration<a class="anchor" aria-label="anchor" href="#initial-configuration"></a>
</h3>
<p>{fledge} assumes that the target R package is version-controlled with Git in a dedicated repository. The following steps are required to set up {fledge} for first time use, with your package.</p>
<ol style="list-style-type: decimal">
<li>
<p>Call <code><a href="../reference/bump_version.html">bump_version()</a></code> as given below to set the package version</p>
<pre><code><span class="fu">fledge</span><span class="fu">::</span><span class="fu"><a href="../reference/bump_version.html">bump_version</a></span><span class="op">(</span><span class="op">)</span></code></pre>
</li>
<li><p>Edit <code>NEWS.md</code> if required (typo fixes, rephrasing, grouping).</p></li>
<li>
<p>Call <code><a href="../reference/finalize_version.html">finalize_version()</a></code> as given below to update <code>NEWS.md</code></p>
<pre><code><span class="fu">fledge</span><span class="fu">::</span><span class="fu"><a href="../reference/finalize_version.html">finalize_version</a></span><span class="op">(</span><span class="op">)</span></code></pre>
</li>
</ol>
<p>You are all set to switch to the development stage now. Ensure that you use bullet points (<code>*</code> or <code>-</code>) in your commit or merge messages to indicate the messages that you want to include in <code>NEWS.md</code>. Use <code>finalize_version(push = TRUE)</code> to push to the remote repository (e.g. GitHub) in one swoop.</p>
</div>
<div class="section level3">
<h3 id="development">Development<a class="anchor" aria-label="anchor" href="#development"></a>
</h3>
<p>{fledge} aims to update <code>NEWS.md</code> and <code>DESCRIPTION</code> correctly whenever a new version is assigned. In order to do this, the following steps need to be included throughout the development workflow.</p>
<ol style="list-style-type: decimal">
<li><p>In commit messages to your main branch (typically <code>main</code> or <code>master</code>), mark everything that should go to <code>NEWS.md</code> with a bullet point (<code>-</code> or <code>*</code>). This is applicable to single commits, merge commits, or squash commits from pull requests. Do not edit <code>NEWS.md</code> manually.</p></li>
<li>
<p>When you want to assign a version number to the current state of your R package e.g. at the end of the day or before a break, call</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">fledge</span><span class="fu">::</span><span class="fu"><a href="../reference/bump_version.html">bump_version</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>The default argument for bump_version is “dev”. So the dev part of the version number will be updated. It is good practice to assign a new version number before switching focus to another project.</p>
</li>
<li><p>Edit <code>NEWS.md</code> if required (typo fixes, rephrasing, grouping).</p></li>
<li>
<p>Call <code><a href="../reference/finalize_version.html">finalize_version()</a></code>: <code><a href="../reference/finalize_version.html">fledge::finalize_version()</a></code>. This achieves the following:</p>
<ul>
<li>
<code>NEWS.md</code> is now composed, based on the most recent commit messages. To understand how <code>NEWS.md</code> is updated by fledge, see the section on <code>NEWS.md</code> implementation.</li>
<li>A new version number is assigned automatically (this is modeled after <code><a href="https://usethis.r-lib.org/reference/use_version.html" class="external-link">usethis::use_version()</a></code>).</li>
<li>A tag matching the version number is assigned automatically, with the most recent <code>NEWS.md</code> messages included in the tag’s message.</li>
</ul>
</li>
</ol>
</div>
<div class="section level3">
<h3 id="releasing-to-cran">Releasing to CRAN<a class="anchor" aria-label="anchor" href="#releasing-to-cran"></a>
</h3>
<p>When you want to release your package to CRAN, follow the steps below:</p>
<ol style="list-style-type: decimal">
<li>
<p>Call bump_version() with the appropriate argument (<code>"patch"</code>, <code>"major"</code>, <code>"minor"</code>). e.g.,</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">fledge</span><span class="fu">::</span><span class="fu"><a href="../reference/bump_version.html">bump_version</a></span><span class="op">(</span><span class="st">"patch"</span><span class="op">)</span></code></pre></div>
</li>
<li><p>Edit <code>NEWS.md</code>, convert the “change log” to “release notes” – a higher-level description of features and bug fixes (typo fixes, rephrasing, grouping).</p></li>
<li>
<p>Call <code><a href="../reference/commit_version.html">commit_version()</a></code> as below</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">fledge</span><span class="fu">::</span><span class="fu"><a href="../reference/commit_version.html">commit_version</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
</li>
<li><p>Make any necessary adjustments before releasing to CRAN depending on results of preparatory / incoming checks.</p></li>
<li>
<p>Once the release/changes have been accepted by CRAN, use the following calls to tag the released version and to switch to a development version immediately.</p>
<pre><code><span class="fu">fledge</span><span class="fu">::</span><span class="fu"><a href="../reference/tag_version.html">tag_version</a></span><span class="op">(</span><span class="op">)</span>
<span class="fu">fledge</span><span class="fu">::</span><span class="fu"><a href="../reference/bump_version.html">bump_version</a></span><span class="op">(</span><span class="op">)</span></code></pre>
</li>
<li><p>Return to development mode!</p></li>
</ol>
</div>
</div>
<div class="section level2">
<h2 id="faq-edge-cases">FAQ &amp; edge cases<a class="anchor" aria-label="anchor" href="#faq-edge-cases"></a>
</h2>
<p>At least we think these questions could be asked. Feel free to also <a href="https://github.com/cynkra/fledge/discussions" class="external-link">ask us questions</a>!</p>
<div class="section level3">
<h3 id="but-what-if-i-want-to-edit-news-md-manually">But what if I want to edit NEWS.md manually?<a class="anchor" aria-label="anchor" href="#but-what-if-i-want-to-edit-news-md-manually"></a>
</h3>
<p>You still can!</p>
<ul>
<li><p>The best moment is between <code><a href="../reference/bump_version.html">bump_version()</a></code> and <code>finalize_version(push = TRUE)</code>.</p></li>
<li><p>You can actually edit at any time, but only between those two calls the text in the changelog will be captured in the tag message, which is better for the tag history.</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="what-if-a-contributor-wants-to-contribute-a-news-item">What if a contributor wants to contribute a NEWS item?<a class="anchor" aria-label="anchor" href="#what-if-a-contributor-wants-to-contribute-a-news-item"></a>
</h3>
<p>If someone opens a PR, with fledge the information about the changes should be entered in the message for the merge or squash commit. Now you could still advise contributors to provide a summary of the change as a comment to the PR.</p>
</div>
<div class="section level3">
<h3 id="does-this-mean-fix-42-will-appear-in-news-md">Does this mean “Fix #42” will appear in NEWS.md?<a class="anchor" aria-label="anchor" href="#does-this-mean-fix-42-will-appear-in-news-md"></a>
</h3>
<p>If you want to fix an issue with a commit message you can</p>
<ul>
<li>put “Fix #42” on a separate non-bulleted line or after a line with 3 hyphens.</li>
</ul>
<pre><code>- Adds support for coolness (#42, @contributor).

---

Fix #42</code></pre>
<ul>
<li>In a PR on e.g. GitHub you can link an issue to a PR by starting the first comment with “Fix 42” so the issue will be closed. The merge or squash commit will be hyperlinked to the PR, but the commit message won’t have that phrase. You should still add an acknowledgement in the actual commit message e.g. “- Adds support for coolness (#42, <span class="citation">@contributor</span>)”.</li>
</ul>
</div>
<div class="section level3">
<h3 id="edge-cases">Edge cases<a class="anchor" aria-label="anchor" href="#edge-cases"></a>
</h3>
<ul>
<li><p>If you <strong>rebase after creating a tag</strong>, you need to call <code><a href="../reference/finalize_version.html">finalize_version()</a></code> to make sure the tag is moved to the mainline branch.</p></li>
<li><p>If you <strong>pushed</strong> via <code>finalize_version(push = TRUE)</code> or <code>git push</code>, the tag may have been pushed as well. In this case, invoke</p></li>
</ul>
<div class="sourceCode" id="cb14"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> push origin :vx.y.z.9www</span></code></pre></div>
<p>(where <code>x.y.z.9www</code> is the new version) to delete the newly created remote tag. This is the reason why {fledge} only tags <code>"dev"</code> releases automatically. Other releases always must be tagged manually with <code><a href="../reference/tag_version.html">tag_version()</a></code>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://krlmlr.info" class="external-link">Kirill Müller</a>, Patrick Schratz.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.9000.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
